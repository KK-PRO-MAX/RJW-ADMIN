import{_ as F,v as R,r as h,g as W,c as k,b as B,e as s,d as n,u as l,l as T,w as i,f as _,j as A,E as c,h as U,F as j,p as q,x as M,I as O,Q,t as C,H as G}from"./index-19TV4XvG.js";const H={class:"page-wrapper"},K={class:"header-row"},z={class:"header-actions"},J={class:"filter-section"},P={class:"card-content"},X={class:"card-row-top"},Y={class:"left-section"},Z={class:"value"},ee={class:"right-section-top"},se={class:"value-large"},te={class:"card-row-bottom"},ae={class:"left-section"},le={class:"value"},ne={class:"right-section-bottom"},oe={__name:"Departments",setup(ie){const w=R(),u=h(""),p=h(""),b=h([{name:"Morning Shift",assignedBays:"1, 2, 3, 4, 5, 6, 7, 8, 9",devices:"9",category:"A1"},{name:"Afternoon Shift",assignedBays:"10, 11, 12, 13, 14",devices:"5",category:"A2"},{name:"Night Shift",assignedBays:"15, 16, 17, 18, 19, 20, 21",devices:"7",category:"A3"},{name:"Admin Team",assignedBays:"22, 23, 24",devices:"3",category:"A1"},{name:"Maintenance Dept",assignedBays:"25, 26, 27, 28",devices:"4",category:"A2"},{name:"Logistics Group",assignedBays:"29, 30, 31, 32, 33, 34",devices:"6",category:"A4"},{name:"Quality Control",assignedBays:"35, 36",devices:"2",category:"A1"},{name:"Warehouse A",assignedBays:"37, 38, 39, 40, 41, 42, 43, 44",devices:"8",category:"A3"},{name:"Warehouse B",assignedBays:"45, 46, 47, 48, 49, 50, 51, 52, 53, 54",devices:"10",category:"A4"},{name:"Customer Support",assignedBays:"55, 56, 57, 58",devices:"4",category:"A2"}]),V=W(()=>{let a=b.value;if(p.value&&(a=a.filter(e=>e.category===p.value)),u.value.trim()){const e=u.value.toLowerCase().trim();a=a.filter(t=>t.name.toLowerCase().includes(e)||t.assignedBays.includes(e)||t.devices.includes(e))}return a}),D=h(null),S=()=>{var a;(a=D.value)==null||a.click()},I=async a=>{const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=d=>{var o,m,r,E;try{const x=d.target.result;if(e.name.endsWith(".csv")){const v=x.split(`
`),re=v[0].split(","),g=[];for(let y=1;y<v.length;y++)if(v[y].trim()){const f=v[y].split(",");g.push({name:((o=f[0])==null?void 0:o.trim())||"",assignedBays:((m=f[1])==null?void 0:m.trim())||"",devices:((r=f[2])==null?void 0:r.trim())||"",category:((E=f[3])==null?void 0:E.trim())||"A1"})}g.length>0&&(b.value=g,alert(`成功导入 ${g.length} 条数据`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&alert("Excel 文件导入需要安装 xlsx 库。请使用 CSV 格式或安装 xlsx 库。")}catch(x){console.error("导入失败:",x),alert("文件导入失败，请检查文件格式")}},t.readAsText(e),a.target.value=""},L=()=>{const a=["Department,Assigned Bays,Devices,Category"],e=b.value.map(r=>`${r.name},${r.assignedBays},${r.devices},${r.category}`),t=[a,...e].join(`
`),d=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),m=URL.createObjectURL(d);o.setAttribute("href",m),o.setAttribute("download",`departments_${new Date().getTime()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),alert("数据导出成功")},$=()=>{w.push({path:"/Departments_all_edit",query:{mode:"add"}})},N=(a,e)=>{w.push({path:"/Departments_all_edit",query:{mode:"edit",index:e},state:{deptData:a}})};return(a,e)=>(B(),k("div",H,[s("div",K,[e[5]||(e[5]=s("h1",{class:"page-title"},"Departments (10)",-1)),s("div",z,[n(l(T),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),placeholder:"Search","prefix-icon":"el-icon-search",class:"search-input"},null,8,["modelValue"]),n(l(A),{class:"import-btn",onClick:S},{default:i(()=>[...e[2]||(e[2]=[_("Import File",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:D,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:I},null,544),n(l(A),{class:"export-btn",onClick:L},{default:i(()=>[...e[3]||(e[3]=[_("Export File",-1)])]),_:1}),n(l(A),{type:"primary",class:"add-dept-btn",onClick:$},{default:i(()=>[...e[4]||(e[4]=[_("Add New Department",-1)])]),_:1})])]),s("div",J,[n(l(U),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:i(()=>[n(l(c),{label:"All Categories",value:""}),n(l(c),{label:"A1",value:"A1"}),n(l(c),{label:"A2",value:"A2"}),n(l(c),{label:"A3",value:"A3"}),n(l(c),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),n(l(G),{gutter:20,class:"departments-grid",type:"flex"},{default:i(()=>[(B(!0),k(j,null,q(V.value,(t,d)=>(B(),M(l(O),{span:6,key:d},{default:i(()=>[n(l(Q),{class:"dept-card"},{default:i(()=>[s("div",P,[s("div",X,[s("div",Y,[e[6]||(e[6]=s("p",{class:"label"},"Department",-1)),s("p",Z,C(t.name),1)]),s("div",ee,[e[7]||(e[7]=s("p",{class:"label"},"Devices Assigned",-1)),s("p",se,C(t.devices),1)])]),s("div",te,[s("div",ae,[e[8]||(e[8]=s("p",{class:"label"},"Assigned Bays",-1)),s("p",le,C(t.assignedBays),1)]),s("div",ne,[n(l(A),{class:"edit-btn",onClick:o=>N(t,d)},{default:i(()=>[...e[9]||(e[9]=[_("Edit",-1)])]),_:1},8,["onClick"])])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))}},ce=F(oe,[["__scopeId","data-v-cb409ba9"]]);export{ce as default};
