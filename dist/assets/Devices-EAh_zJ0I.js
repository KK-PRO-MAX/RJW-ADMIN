import{_ as Z,m as G,r as T,c as P,p as H,a as I,o as N,b as t,d as a,t as p,u as l,i as K,w as r,E as c,e as R,f as m,g as y,D as u,G as z,F as J,k as Q,v as w,H as U}from"./index-D0Jc_NLw.js";import{u as X}from"./deviceStore-Cx5eCT2x.js";import{u as Y}from"./filterStore-BpegOwCG.js";const ee={class:"device-management-page"},ae={class:"header-row"},le={class:"page-title"},te={class:"header-actions"},se={class:"filter-section"},de={class:"device-cards mobile-cards"},ie={class:"card-row data-row"},ce={class:"card-cell"},oe={class:"cell-value"},re={class:"card-cell"},ne={class:"cell-value"},ve={class:"card-cell"},ue={class:"cell-value"},pe={class:"card-row data-row"},fe={class:"card-cell"},me={class:"cell-value"},ye={class:"card-cell"},be={class:"cell-value"},_e={class:"card-cell action-cell"},ge={class:"cell-value"},he={__name:"Devices",setup(Ce){const M=G(),b=X(),B=Y(),A=T(""),_=T("All"),g=P({get:()=>B.selectedCategory,set:s=>B.setCategory(s)}),E=T(null),W={backgroundColor:"#C7EDFF",color:"#000",fontWeight:"bold"},L=s=>{M.push({path:"/Devices_all_edit",query:{mode:"edit",deviceName:s.deviceName,deviceId:s.deviceId,code:s.code,deviceType:s.deviceType,assignedBay:s.assignedBay}})},O=()=>{var s;(s=E.value)==null||s.click()},j=async s=>{const e=s.target.files[0];if(!e)return;const n=new FileReader;n.onload=d=>{var i,f,o,S,V,F,$;try{const x=d.target.result;if(e.name.endsWith(".csv")){const k=x.split(`
`),h=[];for(let C=1;C<k.length;C++)if(k[C].trim()){const v=k[C].split(",");h.push({deviceName:((i=v[0])==null?void 0:i.trim())||"",deviceId:((f=v[1])==null?void 0:f.trim())||"",code:((o=v[2])==null?void 0:o.trim())||"",assignedBay:((S=v[3])==null?void 0:S.trim())||"",deviceType:((V=v[4])==null?void 0:V.trim())||"",status:((F=v[5])==null?void 0:F.trim())||"Available",category:(($=v[6])==null?void 0:$.trim())||"A1"})}h.length>0&&(b.deviceList.length=0,b.deviceList.push(...h),w.success(`Successfully imported ${h.length} device records`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&w.warning("Excel file import requires xlsx library. Please use CSV format or install xlsx library.")}catch(x){console.error("Import failed:",x),w.error("File import failed, please check the file format")}},n.readAsText(e),s.target.value=""},q=()=>{const s="Device Name,Device ID,Barcode or NFC,Assigned Bay,Device Type,Status,Category",e=b.deviceList.map(o=>`${o.deviceName},${o.deviceId},${o.code||""},${o.assignedBay},${o.deviceType},${o.status},${o.category||"A1"}`),n=[s,...e].join(`
`),d=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),f=URL.createObjectURL(d);i.setAttribute("href",f),i.setAttribute("download",`devices_${new Date().getTime()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),w.success("Device data exported successfully")},D=P(()=>{const s=A.value.trim().toLowerCase();return b.deviceList.filter(e=>{const n=g.value?e.category===g.value:!0,d=_.value==="All"?!0:e.deviceType===_.value,i=s?e.deviceName.toLowerCase().includes(s)||e.deviceId.toLowerCase().includes(s)||e.deviceType.toLowerCase().includes(s)||e.code&&e.code.toLowerCase().includes(s):!0;return n&&d&&i})});return(s,e)=>{const n=H("router-link");return N(),I("div",ee,[t("div",ae,[t("h1",le,"Devices ("+p(D.value.length)+")",1),t("div",te,[a(l(K),{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=d=>A.value=d),placeholder:"Search",class:"search-input","prefix-icon":"el-icon-search"},null,8,["modelValue"]),a(l(R),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=d=>_.value=d),placeholder:"Select type",class:"device-type-select"},{default:r(()=>[a(l(c),{label:"All",value:"All"}),a(l(c),{label:"iPhone",value:"iPhone"}),a(l(c),{label:"iPad",value:"iPad"}),a(l(c),{label:"Laptop",value:"Laptop"}),a(l(c),{label:"Android Phone",value:"Android Phone"}),a(l(c),{label:"Android Tablet",value:"Android Tablet"}),a(l(c),{label:"Zebra",value:"Zebra"})]),_:1},8,["modelValue"]),a(l(y),{class:"import-btn",onClick:O},{default:r(()=>[...e[3]||(e[3]=[m("Import File",-1)])]),_:1}),t("input",{ref_key:"fileInput",ref:E,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:j},null,544),a(l(y),{class:"export-btn",onClick:q},{default:r(()=>[...e[4]||(e[4]=[m("Export File",-1)])]),_:1}),a(n,{to:"/Devices_all_edit"},{default:r(()=>[a(l(y),{type:"primary",class:"add-device-btn"},{default:r(()=>[...e[5]||(e[5]=[m("Add New Device",-1)])]),_:1})]),_:1})])]),t("div",se,[a(l(R),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=d=>g.value=d),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:r(()=>[a(l(c),{label:"All Categories",value:""}),a(l(c),{label:"A1",value:"A1"}),a(l(c),{label:"A2",value:"A2"}),a(l(c),{label:"A3",value:"A3"}),a(l(c),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),a(l(z),{data:D.value,border:"","header-cell-style":W,class:"device-table desktop-table"},{default:r(()=>[a(l(u),{prop:"deviceName",label:"Device Name"}),a(l(u),{prop:"deviceId",label:"Device ID"}),a(l(u),{prop:"code",label:"Barcode or NFC*"}),a(l(u),{prop:"deviceType",label:"Device Type"}),a(l(u),{prop:"assignedBay",label:"Assigned Bay"}),a(l(u),{prop:"status",label:"Status"}),a(l(u),{label:"Operation",align:"center"},{default:r(d=>[a(l(y),{type:"primary",plain:"",class:"edit-btn",onClick:i=>L(d.row)},{default:r(()=>[...e[6]||(e[6]=[m(" Edit ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),t("div",de,[(N(!0),I(J,null,Q(D.value,(d,i)=>(N(),I("div",{key:i,class:"device-card"},[e[12]||(e[12]=U('<div class="card-row header-row-card" data-v-7ef305a6><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Device Name</div></div><div class="card-divider-vertical" data-v-7ef305a6></div><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Device ID</div></div><div class="card-divider-vertical" data-v-7ef305a6></div><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Barcode or NFC*</div></div></div>',1)),t("div",ie,[t("div",ce,[t("div",oe,p(d.deviceName),1)]),e[7]||(e[7]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",re,[t("div",ne,p(d.deviceId),1)]),e[8]||(e[8]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",ve,[t("div",ue,p(d.code),1)])]),e[13]||(e[13]=U('<div class="card-row header-row-card" data-v-7ef305a6><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Device Type</div></div><div class="card-divider-vertical" data-v-7ef305a6></div><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Assigned Bay</div></div><div class="card-divider-vertical" data-v-7ef305a6></div><div class="card-cell" data-v-7ef305a6><div class="cell-label" data-v-7ef305a6>Action</div></div></div>',1)),t("div",pe,[t("div",fe,[t("div",me,p(d.deviceType),1)]),e[10]||(e[10]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",ye,[t("div",be,p(d.assignedBay),1)]),e[11]||(e[11]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",_e,[t("div",ge,[a(l(y),{type:"primary",plain:"",class:"edit-btn-mobile",onClick:f=>L(d)},{default:r(()=>[...e[9]||(e[9]=[m(" Edit ",-1)])]),_:1},8,["onClick"])])])])]))),128))])])}}},xe=Z(he,[["__scopeId","data-v-7ef305a6"]]);export{xe as default};
