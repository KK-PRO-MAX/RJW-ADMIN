import{_ as F,H as L,B as O,r as v,z as W,a as w,b as g,d as t,e as s,u as l,h as c,t as p,a8 as j,w as d,g as y,F as $,l as S,E as H,f as z,M as B,N as G,O as D}from"./index-B_Ky5Mco.js";const J={class:"bay-page"},K={class:"page-header"},Q={class:"page-title"},X={class:"content-container"},Y={class:"activate-section"},Z={class:"switch-save-group"},ee={class:"deactivation-group"},te={class:"detail-group"},ae={class:"action-section"},se={class:"action-btns"},le={class:"history-section"},ie={class:"history-header"},oe={class:"file-buttons"},de={class:"activity-cards mobile-cards"},ne={class:"card-row data-row"},ce={class:"card-cell"},re={class:"cell-value"},ue={class:"card-cell"},ve={class:"cell-value"},ye={class:"card-row data-row"},pe={class:"card-cell"},be={class:"cell-value"},me={class:"card-cell"},fe={class:"cell-value"},_e={__name:"Bay_Recent_Activities",setup(he){const C=L(),r=O(),P=v(null),N=v(null),R=v(!1),V=v(""),A=v(""),T=[{label:"Not Needed",value:"not_needed"},{label:"Device Malfunction",value:"device_malfunction"},{label:"Bay Malfunction",value:"bay_malfunction"}],b=v([{time:"11/21/2023 - 12:56 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"10/15/2023 - 2:56 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"10/13/2023 - 11:30 AM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"09/21/2023 - 5:19 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"09/12/2023 - 7:00 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`}]),M=()=>{window.history.length>1?C.back():C.push("/Bay_Management")},q=()=>{var o;(o=N.value)==null||o.click()},I=async o=>{const e=o.target.files[0];if(!e)return;const u=new FileReader;u.onload=a=>{var i,m,n,E;try{const x=a.target.result;if(e.name.endsWith(".csv")){const f=x.split(`
`),ke=f[0].split(","),_=[];for(let h=1;h<f.length;h++)if(f[h].trim()){const k=f[h].split(",");_.push({time:((i=k[0])==null?void 0:i.trim())||"",status:((m=k[1])==null?void 0:m.trim())||"",device:((n=k[2])==null?void 0:n.trim())||"",bay:((E=k[3])==null?void 0:E.trim())||""})}_.length>0&&(b.value=_,alert(`Successfully imported ${_.length} activity records`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&alert("Excel file import requires xlsx library. Please use CSV format or install xlsx library.")}catch(x){console.error("Import failed:",x),alert("File import failed, please check the file format")}},u.readAsText(e),o.target.value=""},U=()=>{const o=["Time,Status,Device,Bay"],e=b.value.map(n=>`${n.time},${n.status},${n.device},${n.bay}`),u=[o,...e].join(`
`),a=new Blob([u],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),m=URL.createObjectURL(a);i.setAttribute("href",m),i.setAttribute("download",`Bay_${r.query.bayNumber||"Unknown"}_Activity_${new Date().getTime()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),alert("Activity records exported successfully")};return(o,e)=>{const u=W("el-input");return g(),w("div",J,[t("div",K,[s(l(c),{type:"default",icon:"ArrowLeft",class:"back-btn",onClick:M}),t("h2",Q," Bay "+p(o.$route.query.bayNumber||"Unknown")+" - Recent Activities ",1)]),t("div",X,[t("div",Y,[t("div",Z,[e[4]||(e[4]=t("span",null,"Bay Activate",-1)),s(l(j),{modelValue:R.value,"onUpdate:modelValue":e[0]||(e[0]=a=>R.value=a)},null,8,["modelValue"]),s(l(c),{class:"save-btn"},{default:d(()=>[...e[3]||(e[3]=[y("Save",-1)])]),_:1})]),t("div",ee,[e[5]||(e[5]=t("span",null,"Deactivation reason",-1)),s(l(z),{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),placeholder:"Select Reason"},{default:d(()=>[(g(),w($,null,S(T,a=>s(l(H),{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),t("div",te,[e[6]||(e[6]=t("span",null,"Detail *",-1)),s(u,{modelValue:A.value,"onUpdate:modelValue":e[2]||(e[2]=a=>A.value=a),type:"textarea",rows:3,placeholder:"Enter detail description",class:"detail-textarea"},null,8,["modelValue"])])]),t("div",ae,[e[10]||(e[10]=t("p",null,"What do you want to do?",-1)),t("div",se,[s(l(c),{class:"open-bay-btn"},{default:d(()=>[...e[7]||(e[7]=[y("Open Bay",-1)])]),_:1}),s(l(c),{class:"check-btn"},{default:d(()=>[...e[8]||(e[8]=[y("Check-Out",-1)])]),_:1}),s(l(c),{class:"check-btn"},{default:d(()=>[...e[9]||(e[9]=[y("Check-In",-1)])]),_:1})])]),t("div",le,[t("div",ie,[e[13]||(e[13]=t("h3",null,"Recent Bay Activity History",-1)),t("div",oe,[s(l(c),{class:"import-btn",onClick:q},{default:d(()=>[...e[11]||(e[11]=[y("Import File",-1)])]),_:1}),t("input",{ref_key:"fileInput",ref:N,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:I},null,544),s(l(c),{class:"export-btn",onClick:U},{default:d(()=>[...e[12]||(e[12]=[y("Export File",-1)])]),_:1})])]),s(l(G),{ref_key:"activityTableRef",ref:P,data:b.value,style:{width:"100%"},class:"desktop-table"},{default:d(()=>[s(l(B),{prop:"time",label:"Time",align:"left"}),s(l(B),{prop:"status",label:"Status",align:"left"}),s(l(B),{prop:"device",label:"Device",align:"left"}),s(l(B),{prop:"bay",label:"Bay",align:"left"})]),_:1},8,["data"]),t("div",de,[(g(!0),w($,null,S(b.value,(a,i)=>(g(),w("div",{key:i,class:"activity-card"},[e[16]||(e[16]=D('<div class="card-row header-row-card" data-v-e46e852a><div class="card-cell" data-v-e46e852a><div class="cell-label" data-v-e46e852a>Time</div></div><div class="card-divider-vertical" data-v-e46e852a></div><div class="card-cell" data-v-e46e852a><div class="cell-label" data-v-e46e852a>Status</div></div></div>',1)),t("div",ne,[t("div",ce,[t("div",re,p(a.time),1)]),e[14]||(e[14]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",ue,[t("div",ve,p(a.status),1)])]),e[17]||(e[17]=D('<div class="card-row header-row-card" data-v-e46e852a><div class="card-cell" data-v-e46e852a><div class="cell-label" data-v-e46e852a>Device</div></div><div class="card-divider-vertical" data-v-e46e852a></div><div class="card-cell" data-v-e46e852a><div class="cell-label" data-v-e46e852a>Bay</div></div></div>',1)),t("div",ye,[t("div",pe,[t("div",be,p(a.device),1)]),e[15]||(e[15]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",me,[t("div",fe,p(a.bay),1)])])]))),128))])])])])}}},ge=F(_e,[["__scopeId","data-v-e46e852a"]]);export{ge as default};
