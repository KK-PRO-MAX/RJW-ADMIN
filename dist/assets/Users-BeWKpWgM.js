import{_ as j,v as B,o as T,r as y,y as S,g as F,c as J,b as L,e as f,d as t,t as P,u as s,l as R,w as c,f as h,j as b,E as m,h as q,D as u,G as W}from"./index-DDRo-3-f.js";const $={class:"users-page"},H={class:"header-row"},Q={class:"page-title"},z={class:"header-actions"},K={class:"filter-section"},X={__name:"Users",setup(Y){const D=B();T(()=>{const a=history.state;a&&a.action&&(a.action==="add"&&a.userData?(d.value.push(a.userData),S.success("User added successfully!")):a.action==="update"&&a.userData&&a.index>=0?a.index<d.value.length&&(d.value[a.index]={...d.value[a.index],...a.userData},S.success("User updated successfully!")):a.action==="delete"&&a.index>=0&&a.index<d.value.length&&(d.value.splice(a.index,1),S.success("User deleted successfully!")),history.replaceState({},document.title))});const d=y([{name:"John Doe",assignedDevice:"iPhone#25",employeeId:"1654656",role:"Manager",deviceGroups:"Day Shift Managers, Staff, Office Staff",status:"Available",category:"A1"},{name:"John Doe",assignedDevice:"iPhone#25",employeeId:"1654656",role:"Manager",deviceGroups:"Day Shift Managers, Staff, Office Staff",status:"In Use",category:"A2"},{name:"Jane Smith",assignedDevice:"Android#18",employeeId:"7890123",role:"Staff",deviceGroups:"Staff, Night Shift",status:"Available",category:"A1"},{name:"Mike Ross",assignedDevice:"iPad#09",employeeId:"4567890",role:"Admin",deviceGroups:"Admin, Office Staff",status:"Damaged",category:"A3"},{name:"Alice Brown",assignedDevice:"MacBook#05",employeeId:"2345678",role:"Supervisor",deviceGroups:"Supervisor, Day Shift",status:"In Use",category:"A2"},{name:"Bob Wilson",assignedDevice:"Android#20",employeeId:"3456789",role:"Staff",deviceGroups:"Staff, Day Shift",status:"Available",category:"A4"},{name:"Charlie Davis",assignedDevice:"iPad#10",employeeId:"5678901",role:"Admin",deviceGroups:"Admin, IT Staff",status:"In Use",category:"A3"},{name:"Eve Miller",assignedDevice:"iPhone#26",employeeId:"6789012",role:"Manager",deviceGroups:"Night Shift Managers, Staff",status:"Damaged",category:"A4"},{name:"Frank Lee",assignedDevice:"Tablet#15",employeeId:"7890124",role:"Staff",deviceGroups:"Staff, Weekend Shift",status:"Available",category:"A1"}]),v=y(""),g=y(""),E={backgroundColor:"#C7EDFF",color:"#000",fontWeight:"bold"},A=F(()=>{let a=d.value;if(g.value&&(a=a.filter(e=>e.category===g.value)),v.value){const e=v.value.toLowerCase();a=a.filter(l=>Object.entries(l).some(([i,o])=>i!=="category"&&o.toString().toLowerCase().includes(e)))}return a}),C=y(null),U=()=>{C.value.click()},k=a=>{const e=a.target.files[0];if(!e)return;const l=new FileReader;e.name.endsWith(".csv")?(l.onload=i=>{const o=i.target.result,r=w(o);r&&(d.value=r,a.target.value="")},l.readAsText(e)):e.name.endsWith(".json")?(l.onload=i=>{try{const o=JSON.parse(i.target.result);Array.isArray(o)?(d.value=o,a.target.value=""):alert("Invalid JSON format. Expected an array.")}catch(o){alert("Error parsing JSON file: "+o.message)}},l.readAsText(e)):alert("Unsupported file format. Please upload CSV or JSON.")},w=a=>{try{const e=a.split(`
`).filter(n=>n.trim());if(e.length<2)return alert("CSV file is empty or has no data."),null;const l=e[0].split(",").map(n=>n.trim()),i=["name","assignedDevice","employeeId","role","deviceGroups","status"],o=i.filter(n=>!l.some(p=>p.toLowerCase()===n));if(o.length>0)return alert(`CSV file is missing required columns: ${o.join(", ")}`),null;const r=[];for(let n=1;n<e.length;n++){const p=e[n].split(","),x={};l.forEach((N,O)=>{var _;const I=N.toLowerCase();i.includes(I)&&(x[I]=((_=p[O])==null?void 0:_.trim())||"")}),r.push(x)}return r}catch(e){return alert("Error parsing CSV file: "+e.message),null}},G=()=>{const a=A.value,e=["name","assignedDevice","employeeId","role","deviceGroups","status"],l=[e.join(","),...a.map(n=>e.map(p=>n[p]||"").join(","))].join(`
`),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download","users_export.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},V=()=>{D.push({path:"/Users_all_edit",query:{mode:"add"}})},M=(a,e)=>{D.push({path:"/Users_all_edit",query:{mode:"edit",index:e},state:{userData:a}})};return(a,e)=>(L(),J("div",$,[f("div",H,[f("h1",Q,"Users ("+P(A.value.length)+")",1),f("div",z,[t(s(R),{placeholder:"Search",style:{width:"200px"},modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l),clearable:""},null,8,["modelValue"]),t(s(b),{class:"import-btn",onClick:U},{default:c(()=>[...e[2]||(e[2]=[h(" Import File ",-1)])]),_:1}),t(s(b),{class:"export-btn",onClick:G},{default:c(()=>[...e[3]||(e[3]=[h(" Export File ",-1)])]),_:1}),t(s(b),{type:"primary",class:"add-user-btn",onClick:V},{default:c(()=>[...e[4]||(e[4]=[h("Add New User",-1)])]),_:1}),f("input",{type:"file",ref_key:"fileInput",ref:C,style:{display:"none"},accept:".csv,.json",onChange:k},null,544)])]),f("div",K,[t(s(q),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:c(()=>[t(s(m),{label:"All Categories",value:""}),t(s(m),{label:"A1",value:"A1"}),t(s(m),{label:"A2",value:"A2"}),t(s(m),{label:"A3",value:"A3"}),t(s(m),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),t(s(W),{data:A.value,border:"","header-cell-style":E,class:"users-table"},{default:c(()=>[t(s(u),{prop:"name",label:"Name"}),t(s(u),{prop:"assignedDevice",label:"Assigned Device"}),t(s(u),{prop:"employeeId",label:"Employee ID"}),t(s(u),{prop:"role",label:"Role"}),t(s(u),{prop:"deviceGroups",label:"Device Groups"}),t(s(u),{prop:"status",label:"Status"}),t(s(u),{label:"Operation",align:"center"},{default:c(l=>[t(s(b),{type:"primary",plain:"",class:"edit-btn",onClick:i=>M(l.row,l.$index)},{default:c(()=>[...e[5]||(e[5]=[h(" Edit ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]))}},ee=j(X,[["__scopeId","data-v-633630a9"]]);export{ee as default};
