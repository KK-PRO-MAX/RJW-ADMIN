import{_ as F,v as R,r as A,g as W,c as V,b as C,e as s,d as n,u as l,l as T,w as i,f as c,j as u,E as p,h as U,F as j,p as q,x as M,I as O,Q,t as b,H as G}from"./index-DDRo-3-f.js";const H={class:"page-wrapper"},K={class:"header-row"},z={class:"header-actions"},J={class:"filter-section"},P={class:"card-content"},X={class:"card-row-top"},Y={class:"left-section"},Z={class:"value"},ee={class:"right-section-top desktop-only"},se={class:"value-large"},te={class:"card-row-bottom"},ae={class:"left-section"},le={class:"value"},ne={class:"right-section-bottom desktop-only"},oe={class:"card-row-mobile mobile-only"},ie={class:"mobile-devices"},de={class:"value-large"},re={class:"mobile-edit"},ce={__name:"Departments",setup(ue){const w=R(),v=A(""),m=A(""),x=A([{name:"Morning Shift",assignedBays:"1, 2, 3, 4, 5, 6, 7, 8, 9",devices:"9",category:"A1"},{name:"Afternoon Shift",assignedBays:"10, 11, 12, 13, 14",devices:"5",category:"A2"},{name:"Night Shift",assignedBays:"15, 16, 17, 18, 19, 20, 21",devices:"7",category:"A3"},{name:"Admin Team",assignedBays:"22, 23, 24",devices:"3",category:"A1"},{name:"Maintenance Dept",assignedBays:"25, 26, 27, 28",devices:"4",category:"A2"},{name:"Logistics Group",assignedBays:"29, 30, 31, 32, 33, 34",devices:"6",category:"A4"},{name:"Quality Control",assignedBays:"35, 36",devices:"2",category:"A1"},{name:"Warehouse A",assignedBays:"37, 38, 39, 40, 41, 42, 43, 44",devices:"8",category:"A3"},{name:"Warehouse B",assignedBays:"45, 46, 47, 48, 49, 50, 51, 52, 53, 54",devices:"10",category:"A4"},{name:"Customer Support",assignedBays:"55, 56, 57, 58",devices:"4",category:"A2"}]),S=W(()=>{let a=x.value;if(m.value&&(a=a.filter(e=>e.category===m.value)),v.value.trim()){const e=v.value.toLowerCase().trim();a=a.filter(t=>t.name.toLowerCase().includes(e)||t.assignedBays.includes(e)||t.devices.includes(e))}return a}),k=A(null),I=()=>{var a;(a=k.value)==null||a.click()},L=async a=>{const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=d=>{var o,g,r,E;try{const B=d.target.result;if(e.name.endsWith(".csv")){const y=B.split(`
`),pe=y[0].split(","),f=[];for(let h=1;h<y.length;h++)if(y[h].trim()){const _=y[h].split(",");f.push({name:((o=_[0])==null?void 0:o.trim())||"",assignedBays:((g=_[1])==null?void 0:g.trim())||"",devices:((r=_[2])==null?void 0:r.trim())||"",category:((E=_[3])==null?void 0:E.trim())||"A1"})}f.length>0&&(x.value=f,alert(`成功导入 ${f.length} 条数据`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&alert("Excel 文件导入需要安装 xlsx 库。请使用 CSV 格式或安装 xlsx 库。")}catch(B){console.error("导入失败:",B),alert("文件导入失败，请检查文件格式")}},t.readAsText(e),a.target.value=""},$=()=>{const a=["Department,Assigned Bays,Devices,Category"],e=x.value.map(r=>`${r.name},${r.assignedBays},${r.devices},${r.category}`),t=[a,...e].join(`
`),d=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),g=URL.createObjectURL(d);o.setAttribute("href",g),o.setAttribute("download",`departments_${new Date().getTime()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),alert("数据导出成功")},N=()=>{w.push({path:"/Departments_all_edit",query:{mode:"add"}})},D=(a,e)=>{w.push({path:"/Departments_all_edit",query:{mode:"edit",index:e},state:{deptData:a}})};return(a,e)=>(C(),V("div",H,[s("div",K,[e[5]||(e[5]=s("h1",{class:"page-title"},"Departments (10)",-1)),s("div",z,[n(l(T),{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"Search","prefix-icon":"el-icon-search",class:"search-input"},null,8,["modelValue"]),n(l(u),{class:"import-btn",onClick:I},{default:i(()=>[...e[2]||(e[2]=[c("Import File",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:k,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:L},null,544),n(l(u),{class:"export-btn",onClick:$},{default:i(()=>[...e[3]||(e[3]=[c("Export File",-1)])]),_:1}),n(l(u),{type:"primary",class:"add-dept-btn",onClick:N},{default:i(()=>[...e[4]||(e[4]=[c("Add New Department",-1)])]),_:1})])]),s("div",J,[n(l(U),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:i(()=>[n(l(p),{label:"All Categories",value:""}),n(l(p),{label:"A1",value:"A1"}),n(l(p),{label:"A2",value:"A2"}),n(l(p),{label:"A3",value:"A3"}),n(l(p),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),n(l(G),{gutter:20,class:"departments-grid",type:"flex"},{default:i(()=>[(C(!0),V(j,null,q(S.value,(t,d)=>(C(),M(l(O),{key:d,span:6},{default:i(()=>[n(l(Q),{class:"dept-card"},{default:i(()=>[s("div",P,[s("div",X,[s("div",Y,[e[6]||(e[6]=s("p",{class:"label"},"Department",-1)),s("p",Z,b(t.name),1)]),s("div",ee,[e[7]||(e[7]=s("p",{class:"label"},"Devices Assigned",-1)),s("p",se,b(t.devices),1)])]),s("div",te,[s("div",ae,[e[8]||(e[8]=s("p",{class:"label"},"Assigned Bays",-1)),s("p",le,b(t.assignedBays),1)]),s("div",ne,[n(l(u),{class:"edit-btn",onClick:o=>D(t,d)},{default:i(()=>[...e[9]||(e[9]=[c("Edit",-1)])]),_:1},8,["onClick"])])]),s("div",oe,[s("div",ie,[e[10]||(e[10]=s("p",{class:"label"},"Devices Assigned",-1)),s("p",de,b(t.devices),1)]),s("div",re,[n(l(u),{class:"edit-btn",onClick:o=>D(t,d)},{default:i(()=>[...e[11]||(e[11]=[c("Edit",-1)])]),_:1},8,["onClick"])])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))}},me=F(ce,[["__scopeId","data-v-1169a26c"]]);export{me as default};
