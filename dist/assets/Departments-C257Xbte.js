import{_ as F,v as R,r as A,g as W,c as C,b as w,e as s,d as l,u as n,l as T,w as r,f as c,j as u,E as p,h as U,F as j,p as q,t as b,R as M}from"./index-DVr0oQUw.js";const O={class:"page-wrapper"},G={class:"header-row"},H={class:"header-actions"},K={class:"filter-section"},Q={class:"departments-grid"},z={class:"card-content"},J={class:"card-row-top"},P={class:"left-section"},X={class:"value"},Y={class:"right-section-top desktop-only"},Z={class:"value-large"},ee={class:"card-row-bottom"},se={class:"left-section"},te={class:"value"},ae={class:"right-section-bottom desktop-only"},le={class:"card-row-mobile mobile-only"},ne={class:"mobile-devices"},oe={class:"value-large"},ie={class:"mobile-edit"},de={__name:"Departments",setup(re){const k=R(),v=A(""),m=A(""),x=A([{name:"Morning Shift",assignedBays:"1, 2, 3, 4, 5, 6, 7, 8, 9",devices:"9",category:"A1"},{name:"Afternoon Shift",assignedBays:"10, 11, 12, 13, 14",devices:"5",category:"A2"},{name:"Night Shift",assignedBays:"15, 16, 17, 18, 19, 20, 21",devices:"7",category:"A3"},{name:"Admin Team",assignedBays:"22, 23, 24",devices:"3",category:"A1"},{name:"Maintenance Dept",assignedBays:"25, 26, 27, 28",devices:"4",category:"A2"},{name:"Logistics Group",assignedBays:"29, 30, 31, 32, 33, 34",devices:"6",category:"A4"},{name:"Quality Control",assignedBays:"35, 36",devices:"2",category:"A1"},{name:"Warehouse A",assignedBays:"37, 38, 39, 40, 41, 42, 43, 44",devices:"8",category:"A3"},{name:"Warehouse B",assignedBays:"45, 46, 47, 48, 49, 50, 51, 52, 53, 54",devices:"10",category:"A4"},{name:"Customer Support",assignedBays:"55, 56, 57, 58",devices:"4",category:"A2"}]),S=W(()=>{let a=x.value;if(m.value&&(a=a.filter(e=>e.category===m.value)),v.value.trim()){const e=v.value.toLowerCase().trim();a=a.filter(t=>t.name.toLowerCase().includes(e)||t.assignedBays.includes(e)||t.devices.includes(e))}return a}),D=A(null),L=()=>{var a;(a=D.value)==null||a.click()},$=async a=>{const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=i=>{var o,g,d,V;try{const B=i.target.result;if(e.name.endsWith(".csv")){const y=B.split(`
`),ce=y[0].split(","),f=[];for(let h=1;h<y.length;h++)if(y[h].trim()){const _=y[h].split(",");f.push({name:((o=_[0])==null?void 0:o.trim())||"",assignedBays:((g=_[1])==null?void 0:g.trim())||"",devices:((d=_[2])==null?void 0:d.trim())||"",category:((V=_[3])==null?void 0:V.trim())||"A1"})}f.length>0&&(x.value=f,alert(`成功导入 ${f.length} 条数据`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&alert("Excel 文件导入需要安装 xlsx 库。请使用 CSV 格式或安装 xlsx 库。")}catch(B){console.error("导入失败:",B),alert("文件导入失败，请检查文件格式")}},t.readAsText(e),a.target.value=""},I=()=>{const a="Department,Assigned Bays,Devices,Category",e=x.value.map(d=>`${d.name},${d.assignedBays},${d.devices},${d.category}`),t=[a,...e].join(`
`),i=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),g=URL.createObjectURL(i);o.setAttribute("href",g),o.setAttribute("download",`departments_${new Date().getTime()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),alert("数据导出成功")},N=()=>{k.push({path:"/Departments_all_edit",query:{mode:"add"}})},E=(a,e)=>{k.push({path:"/Departments_all_edit",query:{mode:"edit",index:e},state:{deptData:a}})};return(a,e)=>(w(),C("div",O,[s("div",G,[e[5]||(e[5]=s("h1",{class:"page-title"},"Departments (10)",-1)),s("div",H,[l(n(T),{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"Search","prefix-icon":"el-icon-search",class:"search-input"},null,8,["modelValue"]),l(n(u),{class:"import-btn",onClick:L},{default:r(()=>[...e[2]||(e[2]=[c("Import File",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:D,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:$},null,544),l(n(u),{class:"export-btn",onClick:I},{default:r(()=>[...e[3]||(e[3]=[c("Export File",-1)])]),_:1}),l(n(u),{type:"primary",class:"add-dept-btn",onClick:N},{default:r(()=>[...e[4]||(e[4]=[c("Add New Department",-1)])]),_:1})])]),s("div",K,[l(n(U),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:r(()=>[l(n(p),{label:"All Categories",value:""}),l(n(p),{label:"A1",value:"A1"}),l(n(p),{label:"A2",value:"A2"}),l(n(p),{label:"A3",value:"A3"}),l(n(p),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),s("div",Q,[(w(!0),C(j,null,q(S.value,(t,i)=>(w(),C("div",{key:i,class:"dept-card-wrapper"},[l(n(M),{class:"dept-card"},{default:r(()=>[s("div",z,[s("div",J,[s("div",P,[e[6]||(e[6]=s("p",{class:"label"},"Department",-1)),s("p",X,b(t.name),1)]),s("div",Y,[e[7]||(e[7]=s("p",{class:"label"},"Devices Assigned",-1)),s("p",Z,b(t.devices),1)])]),s("div",ee,[s("div",se,[e[8]||(e[8]=s("p",{class:"label"},"Assigned Bays",-1)),s("p",te,b(t.assignedBays),1)]),s("div",ae,[l(n(u),{class:"edit-btn",onClick:o=>E(t,i)},{default:r(()=>[...e[9]||(e[9]=[c("Edit",-1)])]),_:1},8,["onClick"])])]),s("div",le,[s("div",ne,[e[10]||(e[10]=s("p",{class:"label"},"Devices Assigned",-1)),s("p",oe,b(t.devices),1)]),s("div",ie,[l(n(u),{class:"edit-btn",onClick:o=>E(t,i)},{default:r(()=>[...e[11]||(e[11]=[c("Edit",-1)])]),_:1},8,["onClick"])])])])]),_:2},1024)]))),128))])]))}},pe=F(de,[["__scopeId","data-v-ad4040de"]]);export{pe as default};
