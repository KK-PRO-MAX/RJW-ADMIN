import{_ as g,c as i,b as r,e as t,R as p,X as f,f as k,t as a,Y as m,F as v,p as h,n as D}from"./index-DDRo-3-f.js";const b={data(){return{reportData:[{time:"11/21/2023 - 12:56 PM",user:"John Doe",role:"Manager",device:"iPhone #25 - 1651",bay:1,event:"Deactivated"},{time:"10/15/2023 - 2:56 PM",user:"Warren Buffet",role:"Staff",device:"iPhone #27 - 1653",bay:2,event:"Activated"},{time:"10/13/2023 - 11:30 AM",user:"Elon Musk",role:"Manager",device:"iPhone #28 - 1654",bay:3,event:"Opened Bay"},{time:"09/21/2023 - 5:19 PM",user:"Frank Diaz",role:"Staff",device:"iPhone #30 - 1656",bay:4,event:"Check-In"}],showDatePicker:!1,startDate:null,endDate:null,startDisplayMonth:new Date,endDisplayMonth:new Date,showEventOptions:!1,selectedEvent:"All",eventOptions:["Deactivated","Activated","Opened Bay","Check-In","Check-Out"],showUsersModal:!1,usersList:["User 1","User 2","User 3","User 4","User 5","User 6","User 7","User 8"],selectedUsers:[],showDevicesModal:!1,devicesList:["Device A","Device B","Device C","Device D","Device E","Device F"],selectedDevices:[],showBaysModal:!1,baysList:[1,2,3,4,5,6,7,8,9,10,11,12],selectedBays:[]}},computed:{startDateFormatted(){return this.startDate?this.formatDate(this.startDate):""},endDateFormatted(){return this.endDate?this.formatDate(this.endDate):""},startMonthYear(){const l=this.startDisplayMonth.toLocaleString("en-US",{month:"long"}),e=this.startDisplayMonth.getFullYear();return`${l} ${e}`},endMonthYear(){const l=this.endDisplayMonth.toLocaleString("en-US",{month:"long"}),e=this.endDisplayMonth.getFullYear();return`${l} ${e}`},startDays(){return this.generateDays(this.startDisplayMonth)},endDays(){return this.generateDays(this.endDisplayMonth)}},methods:{generateDays(l){const e=l.getFullYear(),d=l.getMonth(),u=new Date(e,d+1,0).getDate(),n=new Date(e,d,1).getDay(),o=[];for(let s=0;s<n;s++)o.push({date:null});for(let s=1;s<=u;s++)o.push({date:new Date(e,d,s)});return o},formatDate(l){const e=l.getMonth()+1,d=l.getDate(),u=l.getFullYear();return`${e.toString().padStart(2,"0")}/${d.toString().padStart(2,"0")}/${u}`},isSameDate(l,e){return!l||!e?!1:l.getFullYear()===e.getFullYear()&&l.getMonth()===e.getMonth()&&l.getDate()===e.getDate()},isDateInRange(l){return!this.startDate||!this.endDate?!1:l>=this.startDate&&l<=this.endDate},selectStartDate(l){this.startDate=new Date(l),this.endDate&&this.endDate<this.startDate&&(this.endDate=null)},selectEndDate(l){this.endDate=new Date(l)},prevMonth(l){l==="start"?this.startDisplayMonth=new Date(this.startDisplayMonth.getFullYear(),this.startDisplayMonth.getMonth()-1,1):this.endDisplayMonth=new Date(this.endDisplayMonth.getFullYear(),this.endDisplayMonth.getMonth()-1,1)},nextMonth(l){l==="start"?this.startDisplayMonth=new Date(this.startDisplayMonth.getFullYear(),this.startDisplayMonth.getMonth()+1,1):this.endDisplayMonth=new Date(this.endDisplayMonth.getFullYear(),this.endDisplayMonth.getMonth()+1,1)},resetDates(){this.startDate=null,this.endDate=null},confirmDates(){this.showDatePicker=!1},toggleEventOptions(){this.showEventOptions=!this.showEventOptions},selectEvent(l){this.selectedEvent=l,this.showEventOptions=!1},toggleSelection(l,e){const d=l.indexOf(e);d>-1?l.splice(d,1):l.push(e)},exportTableData(){let l=`Time,User,User Role,Device,Bay #,Event
`;this.reportData.forEach(s=>{const c=[this.escapeCsvField(s.time),this.escapeCsvField(s.user),this.escapeCsvField(s.role),this.escapeCsvField(s.device),this.escapeCsvField(s.bay.toString()),this.escapeCsvField(s.event)];l+=c.join(",")+`
`});const e=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(e),u=document.createElement("a");u.setAttribute("href",d);const o=new Date().toISOString().split("T")[0];u.setAttribute("download",`report_data_${o}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)},escapeCsvField(l){return l?l.includes(",")||l.includes('"')||l.includes(`
`)||l.includes("\r")?`"${l.replace(/"/g,'""')}"`:l:""}},mounted(){document.addEventListener("click",l=>{const e=this.$el.querySelector(".event-selector");!e||e.contains(l.target)||(this.showEventOptions=!1)})}},M={class:"report-page"},C={class:"filter-section"},w={class:"filter-row first-row"},S={class:"filter-item"},U=["value"],_={class:"filter-item"},F=["value"],E={class:"filter-item"},B=["value"],x={class:"filter-row second-row"},O={class:"filter-item"},R={class:"event-selector"},Y={class:"select-options"},L=["onClick"],P={class:"filter-item date-filter"},T=["value"],A=["value"],I={key:0,class:"date-picker-popup"},j={class:"date-picker-header"},N={class:"date-picker-body"},V={class:"calendar"},W={class:"calendar-header"},z={class:"days"},q=["onClick"],J={class:"calendar"},X={class:"calendar-header"},G={class:"days"},H=["onClick"],K={class:"date-picker-footer"},Q={class:"filter-actions"},Z={class:"report-table",ref:"reportTable"},$={key:0,class:"modal-overlay"},ee={class:"modal"},te={class:"modal-header"},se={class:"modal-body grid-container"},le=["onClick"],ne={class:"modal-footer"},oe={key:1,class:"modal-overlay"},ie={class:"modal"},re={class:"modal-header"},ae={class:"modal-body grid-container"},de=["onClick"],ue={class:"modal-footer"},ce={key:2,class:"modal-overlay"},ve={class:"modal"},he={class:"modal-header"},De={class:"modal-body grid-container"},pe=["onClick"],ye={class:"modal-footer"};function ge(l,e,d,u,n,o){return r(),i("div",M,[e[39]||(e[39]=t("h1",null,"Reports",-1)),t("div",C,[t("div",w,[t("div",S,[e[23]||(e[23]=t("label",null,"Users",-1)),t("input",{type:"text",value:n.selectedUsers.length>0?n.selectedUsers.join(", "):"All",readonly:"",onClick:e[0]||(e[0]=s=>n.showUsersModal=!0),class:"clickable-input"},null,8,U)]),t("div",_,[e[24]||(e[24]=t("label",null,"Device",-1)),t("input",{type:"text",value:n.selectedDevices.length>0?n.selectedDevices.join(", "):"All",readonly:"",onClick:e[1]||(e[1]=s=>n.showDevicesModal=!0),class:"clickable-input"},null,8,F)]),t("div",E,[e[25]||(e[25]=t("label",null,"Bay #",-1)),t("input",{type:"text",value:n.selectedBays.length>0?n.selectedBays.join(", "):"All",readonly:"",onClick:e[2]||(e[2]=s=>n.showBaysModal=!0),class:"clickable-input"},null,8,B)])]),t("div",x,[t("div",O,[e[27]||(e[27]=t("label",null,"Event",-1)),t("div",R,[t("div",{class:"select-trigger",onClick:e[3]||(e[3]=(...s)=>o.toggleEventOptions&&o.toggleEventOptions(...s))},[k(a(n.selectedEvent)+" ",1),e[26]||(e[26]=t("i",{class:"dropdown-icon"},"▼",-1))]),f(t("div",Y,[(r(!0),i(v,null,h(n.eventOptions,s=>(r(),i("div",{class:"option",key:s,onClick:c=>o.selectEvent(s)},a(s),9,L))),128))],512),[[m,n.showEventOptions]])])]),t("div",P,[e[31]||(e[31]=t("label",null,"Dates",-1)),t("input",{type:"text",value:o.startDateFormatted,placeholder:"Starting Date",readonly:"",onClick:e[4]||(e[4]=s=>n.showDatePicker=!0),class:"clickable-input"},null,8,T),e[32]||(e[32]=t("span",null,"to",-1)),t("input",{type:"text",value:o.endDateFormatted,placeholder:"Ending Date",readonly:"",onClick:e[5]||(e[5]=s=>n.showDatePicker=!0),class:"clickable-input"},null,8,A),n.showDatePicker?(r(),i("div",I,[t("div",j,[t("button",{onClick:e[6]||(e[6]=s=>n.showDatePicker=!1)},"×"),e[28]||(e[28]=t("h3",null,"Select Date Range",-1))]),t("div",N,[t("div",V,[t("div",W,[t("button",{onClick:e[7]||(e[7]=s=>o.prevMonth("start"))},"←"),t("h4",null,a(o.startMonthYear),1),t("button",{onClick:e[8]||(e[8]=s=>o.nextMonth("start"))},"→")]),e[29]||(e[29]=t("div",{class:"weekdays"},[t("div",null,"Sun"),t("div",null,"Mon"),t("div",null,"Tue"),t("div",null,"Wed"),t("div",null,"Thu"),t("div",null,"Fri"),t("div",null,"Sat")],-1)),t("div",z,[(r(!0),i(v,null,h(o.startDays,(s,c)=>(r(),i("div",{class:D(["day",{empty:!s.date,selected:s.date&&o.isSameDate(s.date,n.startDate),"in-range":s.date&&o.isDateInRange(s.date)}]),key:c,onClick:y=>s.date&&o.selectStartDate(s.date)},a(s.date?s.date.getDate():""),11,q))),128))])]),t("div",J,[t("div",X,[t("button",{onClick:e[9]||(e[9]=s=>o.prevMonth("end"))},"←"),t("h4",null,a(o.endMonthYear),1),t("button",{onClick:e[10]||(e[10]=s=>o.nextMonth("end"))},"→")]),e[30]||(e[30]=t("div",{class:"weekdays"},[t("div",null,"Sun"),t("div",null,"Mon"),t("div",null,"Tue"),t("div",null,"Wed"),t("div",null,"Thu"),t("div",null,"Fri"),t("div",null,"Sat")],-1)),t("div",G,[(r(!0),i(v,null,h(o.endDays,(s,c)=>(r(),i("div",{class:D(["day",{empty:!s.date,selected:s.date&&o.isSameDate(s.date,n.endDate),"in-range":s.date&&o.isDateInRange(s.date),disabled:s.date&&s.date<n.startDate}]),key:c,onClick:y=>s.date&&s.date>=n.startDate&&o.selectEndDate(s.date)},a(s.date?s.date.getDate():""),11,H))),128))])])]),t("div",K,[t("button",{onClick:e[11]||(e[11]=(...s)=>o.resetDates&&o.resetDates(...s))},"Reset"),t("button",{onClick:e[12]||(e[12]=(...s)=>o.confirmDates&&o.confirmDates(...s))},"Apply")])])):p("",!0)])]),t("div",Q,[e[33]||(e[33]=t("button",{class:"btn clear"},"Clear Filters",-1)),e[34]||(e[34]=t("button",{class:"btn run"},"Run Report",-1)),t("span",{class:"export-data",onClick:e[13]||(e[13]=(...s)=>o.exportTableData&&o.exportTableData(...s))},"Export Data")])]),t("table",Z,[e[35]||(e[35]=t("thead",null,[t("tr",null,[t("th",null,"Time"),t("th",null,"User"),t("th",null,"User Role"),t("th",null,"Device"),t("th",null,"Bay #"),t("th",null,"Event")])],-1)),t("tbody",null,[(r(!0),i(v,null,h(n.reportData,s=>(r(),i("tr",{key:s.time},[t("td",null,a(s.time),1),t("td",null,a(s.user),1),t("td",null,a(s.role),1),t("td",null,a(s.device),1),t("td",null,a(s.bay),1),t("td",null,a(s.event),1)]))),128))])],512),n.showUsersModal?(r(),i("div",$,[t("div",ee,[t("div",te,[e[36]||(e[36]=t("h3",null,"Select Users",-1)),t("button",{onClick:e[14]||(e[14]=s=>n.showUsersModal=!1),class:"close-btn"},"×")]),t("div",se,[(r(!0),i(v,null,h(n.usersList,s=>(r(),i("div",{class:D(["grid-item",{selected:n.selectedUsers.includes(s)}]),key:s,onClick:c=>o.toggleSelection(n.selectedUsers,s)},a(s),11,le))),128))]),t("div",ne,[t("button",{class:"modal-btn cancel",onClick:e[15]||(e[15]=s=>n.showUsersModal=!1)},"Cancel"),t("button",{class:"modal-btn confirm",onClick:e[16]||(e[16]=s=>n.showUsersModal=!1)},"Confirm")])])])):p("",!0),n.showDevicesModal?(r(),i("div",oe,[t("div",ie,[t("div",re,[e[37]||(e[37]=t("h3",null,"Select Devices",-1)),t("button",{onClick:e[17]||(e[17]=s=>n.showDevicesModal=!1),class:"close-btn"},"×")]),t("div",ae,[(r(!0),i(v,null,h(n.devicesList,s=>(r(),i("div",{class:D(["grid-item",{selected:n.selectedDevices.includes(s)}]),key:s,onClick:c=>o.toggleSelection(n.selectedDevices,s)},a(s),11,de))),128))]),t("div",ue,[t("button",{class:"modal-btn cancel",onClick:e[18]||(e[18]=s=>n.showDevicesModal=!1)},"Cancel"),t("button",{class:"modal-btn confirm",onClick:e[19]||(e[19]=s=>n.showDevicesModal=!1)},"Confirm")])])])):p("",!0),n.showBaysModal?(r(),i("div",ce,[t("div",ve,[t("div",he,[e[38]||(e[38]=t("h3",null,"Select Bay Numbers",-1)),t("button",{onClick:e[20]||(e[20]=s=>n.showBaysModal=!1),class:"close-btn"},"×")]),t("div",De,[(r(!0),i(v,null,h(n.baysList,s=>(r(),i("div",{class:D(["grid-item",{selected:n.selectedBays.includes(s)}]),key:s,onClick:c=>o.toggleSelection(n.selectedBays,s)},a(s),11,pe))),128))]),t("div",ye,[t("button",{class:"modal-btn cancel",onClick:e[21]||(e[21]=s=>n.showBaysModal=!1)},"Cancel"),t("button",{class:"modal-btn confirm",onClick:e[22]||(e[22]=s=>n.showBaysModal=!1)},"Confirm")])])])):p("",!0)])}const ke=g(b,[["render",ge],["__scopeId","data-v-69a34651"]]);export{ke as default};
