import{_ as R,r as y,g as $,c as f,b as N,e as a,d as i,w as n,f as d,n as h,u as o,E as p,h as S,s as z,j as J,k as K,F as W,l as Y,m as q,t as r}from"./index-BwbcA2R5.js";const G={class:"notifications-page"},H={class:"top-layout"},Q={class:"sort-group"},X={class:"middle-area"},Z={class:"import-export-group"},ee={class:"top-right"},te={class:"notifications-list"},ae={class:"item-left"},se={class:"top-row"},ie={class:"bay-section"},oe={class:"content-section"},ne={class:"user-info-container"},re={class:"user-name"},le={class:"device-info"},ce={class:"item-right"},ue={class:"action-btns"},de={class:"item-time"},pe={__name:"Notifications",setup(ve){const c=y([{content:"Door not fully closed",user:"Emilee Rodriguez",time:"12:28 PM",date:"August 21st, 2023",priority:1,bayNumber:8,deviceTypeID:"DEV-001",deviceName:"Smart Charger Pro",serialNumber:"SN-20230821001",nfcTag:"NFC-8A3B9C",chargingStatus:"Charging",damageStatus:"No Damage"},{content:"Device disconnected unexpectedly",user:"Marcus Wilson",time:"11:45 AM",date:"August 21st, 2023",priority:2,bayNumber:3,deviceTypeID:"DEV-002",deviceName:"Battery Tester",serialNumber:"SN-20230821002",nfcTag:"NFC-5D7E2F",chargingStatus:"Not Charging",damageStatus:"Minor Scratch"},{content:"Low battery alert",user:"Sophia Martinez",time:"10:30 AM",date:"August 20th, 2023",priority:3,bayNumber:5,deviceTypeID:"DEV-001",deviceName:"Smart Charger Pro",serialNumber:"SN-20230820001",nfcTag:"NFC-2C4D6E",chargingStatus:"Low Power",damageStatus:"No Damage"},{content:"Device overheating",user:"Liam Thompson",time:"02:15 PM",date:"August 19th, 2023",priority:4,bayNumber:12,deviceTypeID:"DEV-003",deviceName:"Power Inverter",serialNumber:"SN-20230819001",nfcTag:"NFC-9F1A3B",chargingStatus:"Charging",damageStatus:"No Damage"}]),v=y("priority"),g=y(""),_=$(()=>{let s=[...c.value];if(v.value==="priority"?s.sort((e,t)=>t.priority-e.priority):s.sort((e,t)=>new Date(t.date)-new Date(e.date)),g.value.trim()){const e=g.value.toLowerCase();s=s.filter(t=>t.user.toLowerCase().includes(e)||t.bayNumber.toString().includes(e)||t.deviceTypeID.toLowerCase().includes(e)||t.deviceName.toLowerCase().includes(e)||t.serialNumber.toLowerCase().includes(e)||t.nfcTag.toLowerCase().includes(e)||t.chargingStatus.toLowerCase().includes(e)||t.damageStatus.toLowerCase().includes(e))}return s}),C=()=>{c.value=[]},D=s=>{c.value.splice(s,1)},w=s=>{console.log("打开Bay:",s)},T=s=>{const e=s.raw,t=new FileReader;t.onload=u=>{try{const l=JSON.parse(u.target.result);Array.isArray(l)&&(c.value=[...c.value,...l])}catch{const E=u.target.result.split(`
`).slice(1).filter(m=>m.trim()).map(m=>{const[I,L,A,F,B,x,V,j,M,U,P,O]=m.split(",");return{content:I||"",user:L||"",time:A||"",date:F||"",priority:Number(B)||1,bayNumber:Number(x)||0,deviceTypeID:V||"",deviceName:j||"",serialNumber:M||"",nfcTag:U||"",chargingStatus:P||"Unknown",damageStatus:O||"Unknown"}});c.value=[...c.value,...E]}},t.readAsText(e)},k=()=>{const e=[["content","user","time","date","priority","bayNumber","deviceTypeID","deviceName","serialNumber","nfcTag","chargingStatus","damageStatus"].join(","),...c.value.map(b=>Object.values(b).join(","))].join(`
`),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(t),l=document.createElement("a");l.href=u,l.download=`notifications_${new Date().toISOString().slice(0,10)}.csv`,l.click(),URL.revokeObjectURL(u)};return(s,e)=>(N(),f("div",G,[e[12]||(e[12]=a("h1",{class:"page-title"},"Notifications",-1)),a("div",H,[a("div",Q,[i(o(p),{type:"primary",plain:"",class:h({"active-sort":v.value==="priority"}),onClick:e[0]||(e[0]=t=>v.value="priority")},{default:n(()=>[...e[3]||(e[3]=[d(" Prioritization sorting ",-1)])]),_:1},8,["class"]),i(o(p),{type:"default",plain:"",class:h({"active-sort":v.value==="time"}),onClick:e[1]||(e[1]=t=>v.value="time")},{default:n(()=>[...e[4]||(e[4]=[d(" Time sorting ",-1)])]),_:1},8,["class"])]),a("div",X,[i(o(J),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),placeholder:"Search user, device info, bay number, status...",class:"search-input"},{prefix:n(()=>[i(o(S),{class:"search-icon"},{default:n(()=>[i(o(z))]),_:1})]),_:1},8,["modelValue"]),a("div",Z,[i(o(K),{class:"upload-btn",action:"#","auto-upload":!1,"on-change":T,accept:".csv,.json"},{default:n(()=>[i(o(p),{type:"success",plain:""},{default:n(()=>[...e[5]||(e[5]=[d("Import File",-1)])]),_:1})]),_:1}),i(o(p),{type:"primary",plain:"",onClick:k},{default:n(()=>[...e[6]||(e[6]=[d("Export File",-1)])]),_:1})])]),a("div",ee,[e[8]||(e[8]=a("div",{class:"system-time"},[a("div",null,"12:52:21 PM"),a("div",null,"May 6th, 2025")],-1)),i(o(p),{style:{"background-color":"#FF0400","font-weight":"700"},type:"danger",onClick:C},{default:n(()=>[...e[7]||(e[7]=[d("Clear All",-1)])]),_:1})])]),a("div",te,[(N(!0),f(W,null,Y(_.value,(t,u)=>(N(),f("div",{class:"notification-item",key:u},[a("div",ae,[a("div",se,[a("div",ie,[i(o(S),null,{default:n(()=>[i(o(q))]),_:1}),d(" BAY "+r(t.bayNumber),1)]),a("div",oe,r(t.content),1)]),a("div",ne,[e[9]||(e[9]=a("div",{class:"user-label"},"USER",-1)),a("div",re,r(t.user),1)]),a("div",le,[a("span",null,"Device: "+r(t.deviceTypeID)+" - "+r(t.deviceName),1),a("span",null,"SN: "+r(t.serialNumber),1),a("span",null,"NFC: "+r(t.nfcTag),1),a("span",null,"Charging: "+r(t.chargingStatus),1),a("span",null,"Damage: "+r(t.damageStatus),1)])]),a("div",ce,[a("div",ue,[i(o(p),{type:"primary",plain:"",onClick:l=>w(t)},{default:n(()=>[...e[10]||(e[10]=[d(" Open Bay ",-1)])]),_:1},8,["onClick"]),i(o(p),{type:"default",plain:"",onClick:l=>D(u)},{default:n(()=>[...e[11]||(e[11]=[d(" Dismiss ",-1)])]),_:1},8,["onClick"])]),a("div",de,[a("div",null,r(t.time),1),a("div",null,r(t.date),1)])])]))),128))])]))}},me=R(pe,[["__scopeId","data-v-1098a1b6"]]);export{me as default};
