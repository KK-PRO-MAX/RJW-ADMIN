import{_ as T,v as J,o as R,r as S,y as A,g as P,c as D,b as C,e as s,d as t,t as u,u as d,l as q,w as v,f as m,j as y,E as g,h as W,D as p,G as $,F as H,p as Q,H as G}from"./index-DVr0oQUw.js";const z={class:"users-page"},K={class:"header-row"},X={class:"page-title"},Y={class:"header-actions"},Z={class:"filter-section"},ee={class:"user-cards mobile-cards"},ae={class:"card-row data-row"},se={class:"card-cell"},le={class:"cell-value"},te={class:"card-cell"},de={class:"cell-value"},ie={class:"card-cell"},re={class:"cell-value"},oe={class:"card-row data-row"},ce={class:"card-cell"},ne={class:"cell-value"},ve={class:"card-cell"},ue={class:"cell-value"},pe={class:"card-cell"},fe={class:"cell-value"},me={class:"card-row data-row"},ye={class:"card-cell action-cell",style:{"grid-column":"1 / -1"}},ge={class:"cell-value"},he={__name:"Users",setup(be){const w=J();R(()=>{const a=history.state;a&&a.action&&(a.action==="add"&&a.userData?(n.value.push(a.userData),A.success("User added successfully!")):a.action==="update"&&a.userData&&a.index>=0?a.index<n.value.length&&(n.value[a.index]={...n.value[a.index],...a.userData},A.success("User updated successfully!")):a.action==="delete"&&a.index>=0&&a.index<n.value.length&&(n.value.splice(a.index,1),A.success("User deleted successfully!")),history.replaceState({},document.title))});const n=S([{name:"John Doe",assignedDevice:"iPhone#25",employeeId:"1654656",role:"Manager",deviceGroups:"Day Shift Managers, Staff, Office Staff",status:"Available",category:"A1"},{name:"John Doe",assignedDevice:"iPhone#25",employeeId:"1654656",role:"Manager",deviceGroups:"Day Shift Managers, Staff, Office Staff",status:"In Use",category:"A2"},{name:"Jane Smith",assignedDevice:"Android#18",employeeId:"7890123",role:"Staff",deviceGroups:"Staff, Night Shift",status:"Available",category:"A1"},{name:"Mike Ross",assignedDevice:"iPad#09",employeeId:"4567890",role:"Admin",deviceGroups:"Admin, Office Staff",status:"Damaged",category:"A3"},{name:"Alice Brown",assignedDevice:"MacBook#05",employeeId:"2345678",role:"Supervisor",deviceGroups:"Supervisor, Day Shift",status:"In Use",category:"A2"},{name:"Bob Wilson",assignedDevice:"Android#20",employeeId:"3456789",role:"Staff",deviceGroups:"Staff, Day Shift",status:"Available",category:"A4"},{name:"Charlie Davis",assignedDevice:"iPad#10",employeeId:"5678901",role:"Admin",deviceGroups:"Admin, IT Staff",status:"In Use",category:"A3"},{name:"Eve Miller",assignedDevice:"iPhone#26",employeeId:"6789012",role:"Manager",deviceGroups:"Night Shift Managers, Staff",status:"Damaged",category:"A4"},{name:"Frank Lee",assignedDevice:"Tablet#15",employeeId:"7890124",role:"Staff",deviceGroups:"Staff, Weekend Shift",status:"Available",category:"A1"}]),h=S(""),b=S(""),V={backgroundColor:"#C7EDFF",color:"#000",fontWeight:"bold"},_=P(()=>{let a=n.value;if(b.value&&(a=a.filter(e=>e.category===b.value)),h.value){const e=h.value.toLowerCase();a=a.filter(l=>Object.entries(l).some(([i,r])=>i!=="category"&&r.toString().toLowerCase().includes(e)))}return a}),I=S(null),N=()=>{I.value.click()},O=a=>{const e=a.target.files[0];if(!e)return;const l=new FileReader;e.name.endsWith(".csv")?(l.onload=i=>{const r=i.target.result,o=M(r);o&&(n.value=o,a.target.value="")},l.readAsText(e)):e.name.endsWith(".json")?(l.onload=i=>{try{const r=JSON.parse(i.target.result);Array.isArray(r)?(n.value=r,a.target.value=""):alert("Invalid JSON format. Expected an array.")}catch(r){alert("Error parsing JSON file: "+r.message)}},l.readAsText(e)):alert("Unsupported file format. Please upload CSV or JSON.")},M=a=>{try{const e=a.split(`
`).filter(c=>c.trim());if(e.length<2)return alert("CSV file is empty or has no data."),null;const l=e[0].split(",").map(c=>c.trim()),i=["name","assignedDevice","employeeId","role","deviceGroups","status"],r=i.filter(c=>!l.some(f=>f.toLowerCase()===c));if(r.length>0)return alert(`CSV file is missing required columns: ${r.join(", ")}`),null;const o=[];for(let c=1;c<e.length;c++){const f=e[c].split(","),E={};l.forEach((B,L)=>{var U;const k=B.toLowerCase();i.includes(k)&&(E[k]=((U=f[L])==null?void 0:U.trim())||"")}),o.push(E)}return o}catch(e){return alert("Error parsing CSV file: "+e.message),null}},j=()=>{const a=_.value,e=["name","assignedDevice","employeeId","role","deviceGroups","status"],l=[e.join(","),...a.map(c=>e.map(f=>c[f]||"").join(","))].join(`
`),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","users_export.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},F=()=>{w.push({path:"/Users_all_edit",query:{mode:"add"}})},x=(a,e)=>{w.push({path:"/Users_all_edit",query:{mode:"edit",index:e},state:{userData:a}})};return(a,e)=>(C(),D("div",z,[s("div",K,[s("h1",X,"Users ("+u(_.value.length)+")",1),s("div",Y,[t(d(q),{placeholder:"Search",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),style:{width:"200px"},clearable:""},null,8,["modelValue"]),t(d(y),{class:"import-btn",onClick:N},{default:v(()=>[...e[2]||(e[2]=[m(" Import File ",-1)])]),_:1}),t(d(y),{class:"export-btn",onClick:j},{default:v(()=>[...e[3]||(e[3]=[m(" Export File ",-1)])]),_:1}),t(d(y),{type:"primary",class:"add-user-btn",onClick:F},{default:v(()=>[...e[4]||(e[4]=[m("Add New User",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:I,type:"file",style:{display:"none"},accept:".csv,.json",onChange:O},null,544)])]),s("div",Z,[t(d(W),{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:v(()=>[t(d(g),{label:"All Categories",value:""}),t(d(g),{label:"A1",value:"A1"}),t(d(g),{label:"A2",value:"A2"}),t(d(g),{label:"A3",value:"A3"}),t(d(g),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),t(d($),{data:_.value,border:"","header-cell-style":V,class:"users-table desktop-table"},{default:v(()=>[t(d(p),{prop:"name",label:"Name"}),t(d(p),{prop:"assignedDevice",label:"Assigned Device"}),t(d(p),{prop:"employeeId",label:"Employee ID"}),t(d(p),{prop:"role",label:"Role"}),t(d(p),{prop:"deviceGroups",label:"Device Groups"}),t(d(p),{prop:"status",label:"Status"}),t(d(p),{label:"Operation",align:"center"},{default:v(l=>[t(d(y),{type:"primary",plain:"",class:"edit-btn",onClick:i=>x(l.row,l.$index)},{default:v(()=>[...e[5]||(e[5]=[m(" Edit ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),s("div",ee,[(C(!0),D(H,null,Q(_.value,(l,i)=>(C(),D("div",{key:i,class:"user-card"},[e[11]||(e[11]=G('<div class="card-row header-row-card" data-v-01259415><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Name</div></div><div class="card-divider-vertical" data-v-01259415></div><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Assigned Device</div></div><div class="card-divider-vertical" data-v-01259415></div><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Employee ID</div></div></div>',1)),s("div",ae,[s("div",se,[s("div",le,u(l.name),1)]),e[6]||(e[6]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",te,[s("div",de,u(l.assignedDevice),1)]),e[7]||(e[7]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",ie,[s("div",re,u(l.employeeId),1)])]),e[12]||(e[12]=G('<div class="card-row header-row-card" data-v-01259415><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Role</div></div><div class="card-divider-vertical" data-v-01259415></div><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Device Groups</div></div><div class="card-divider-vertical" data-v-01259415></div><div class="card-cell" data-v-01259415><div class="cell-label" data-v-01259415>Status</div></div></div>',1)),s("div",oe,[s("div",ce,[s("div",ne,u(l.role),1)]),e[8]||(e[8]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",ve,[s("div",ue,u(l.deviceGroups),1)]),e[9]||(e[9]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",pe,[s("div",fe,u(l.status),1)])]),e[13]||(e[13]=s("div",{class:"card-row header-row-card"},[s("div",{class:"card-cell",style:{"grid-column":"1 / -1"}},[s("div",{class:"cell-label"},"Operation")])],-1)),s("div",me,[s("div",ye,[s("div",ge,[t(d(y),{type:"primary",plain:"",class:"edit-btn-mobile",onClick:r=>x(l,i)},{default:v(()=>[...e[10]||(e[10]=[m(" Edit ",-1)])]),_:1},8,["onClick"])])])])]))),128))])]))}},Se=T(he,[["__scopeId","data-v-01259415"]]);export{Se as default};
