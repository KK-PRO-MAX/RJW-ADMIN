import{_ as F,m as U,I as L,r as y,a as w,o as g,b as t,d as s,u as l,g as n,t as b,Z as O,w as o,f as v,F as E,k as S,E as W,e as j,D as B,G as H,H as V}from"./index-D0Jc_NLw.js";const G={class:"bay-page"},Z={class:"page-header"},z={class:"page-title"},J={class:"content-container"},K={class:"activate-section"},Q={class:"switch-save-group"},X={class:"deactivation-group"},Y={class:"action-section"},ee={class:"action-btns"},te={class:"history-section"},ae={class:"history-header"},se={class:"file-buttons"},le={class:"activity-cards mobile-cards"},ie={class:"card-row data-row"},ce={class:"card-cell"},oe={class:"cell-value"},de={class:"card-cell"},ne={class:"cell-value"},re={class:"card-row data-row"},ve={class:"card-cell"},ue={class:"cell-value"},ye={class:"card-cell"},be={class:"cell-value"},fe={__name:"Bay_Recent_Activities",setup(pe){const C=U(),r=L(),P=y(null),R=y(null),A=y(!1),N=y(""),T=[{label:"Not Needed",value:"not_needed"},{label:"Device Malfunction",value:"device_malfunction"},{label:"Bay Malfunction",value:"bay_malfunction"}],f=y([{time:"11/21/2023 - 12:56 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"10/15/2023 - 2:56 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"10/13/2023 - 11:30 AM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"09/21/2023 - 5:19 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`},{time:"09/12/2023 - 7:00 PM",status:"Checked-out",device:"iPhone002",bay:`Bay ${r.query.bayNumber||2}`}]),D=()=>{window.history.length>1?C.back():C.push("/Bay_Management")},I=()=>{var i;(i=R.value)==null||i.click()},q=async i=>{const e=i.target.files[0];if(!e)return;const a=new FileReader;a.onload=u=>{var c,p,d,$;try{const x=u.target.result;if(e.name.endsWith(".csv")){const m=x.split(`
`),me=m[0].split(","),_=[];for(let h=1;h<m.length;h++)if(m[h].trim()){const k=m[h].split(",");_.push({time:((c=k[0])==null?void 0:c.trim())||"",status:((p=k[1])==null?void 0:p.trim())||"",device:((d=k[2])==null?void 0:d.trim())||"",bay:(($=k[3])==null?void 0:$.trim())||""})}_.length>0&&(f.value=_,alert(`Successfully imported ${_.length} activity records`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&alert("Excel file import requires xlsx library. Please use CSV format or install xlsx library.")}catch(x){console.error("Import failed:",x),alert("File import failed, please check the file format")}},a.readAsText(e),i.target.value=""},M=()=>{const i=["Time,Status,Device,Bay"],e=f.value.map(d=>`${d.time},${d.status},${d.device},${d.bay}`),a=[i,...e].join(`
`),u=new Blob([a],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),p=URL.createObjectURL(u);c.setAttribute("href",p),c.setAttribute("download",`Bay_${r.query.bayNumber||"Unknown"}_Activity_${new Date().getTime()}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),alert("Activity records exported successfully")};return(i,e)=>(g(),w("div",G,[t("div",Z,[s(l(n),{type:"default",icon:"ArrowLeft",class:"back-btn",onClick:D}),t("h2",z," Bay "+b(i.$route.query.bayNumber||"Unknown")+" - Recent Activities ",1)]),t("div",J,[t("div",K,[t("div",Q,[e[3]||(e[3]=t("span",null,"Bay Activate",-1)),s(l(O),{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=a=>A.value=a)},null,8,["modelValue"]),s(l(n),{class:"save-btn"},{default:o(()=>[...e[2]||(e[2]=[v("Save",-1)])]),_:1})]),t("div",X,[e[4]||(e[4]=t("span",null,"Deactivation reason",-1)),s(l(j),{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=a=>N.value=a),placeholder:"Select Reason"},{default:o(()=>[(g(),w(E,null,S(T,a=>s(l(W),{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),t("div",Y,[e[8]||(e[8]=t("p",null,"What do you want to do?",-1)),t("div",ee,[s(l(n),{class:"open-bay-btn"},{default:o(()=>[...e[5]||(e[5]=[v("Open Bay",-1)])]),_:1}),s(l(n),{class:"check-btn"},{default:o(()=>[...e[6]||(e[6]=[v("Check-Out",-1)])]),_:1}),s(l(n),{class:"check-btn"},{default:o(()=>[...e[7]||(e[7]=[v("Check-In",-1)])]),_:1})])]),t("div",te,[t("div",ae,[e[11]||(e[11]=t("h3",null,"Recent Bay Activity History",-1)),t("div",se,[s(l(n),{class:"import-btn",onClick:I},{default:o(()=>[...e[9]||(e[9]=[v("Import File",-1)])]),_:1}),t("input",{ref_key:"fileInput",ref:R,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:q},null,544),s(l(n),{class:"export-btn",onClick:M},{default:o(()=>[...e[10]||(e[10]=[v("Export File",-1)])]),_:1})])]),s(l(H),{ref_key:"activityTableRef",ref:P,data:f.value,style:{width:"100%"},class:"desktop-table"},{default:o(()=>[s(l(B),{prop:"time",label:"Time",align:"left"}),s(l(B),{prop:"status",label:"Status",align:"left"}),s(l(B),{prop:"device",label:"Device",align:"left"}),s(l(B),{prop:"bay",label:"Bay",align:"left"})]),_:1},8,["data"]),t("div",le,[(g(!0),w(E,null,S(f.value,(a,u)=>(g(),w("div",{key:u,class:"activity-card"},[e[14]||(e[14]=V('<div class="card-row header-row-card" data-v-868cf37c><div class="card-cell" data-v-868cf37c><div class="cell-label" data-v-868cf37c>Time</div></div><div class="card-divider-vertical" data-v-868cf37c></div><div class="card-cell" data-v-868cf37c><div class="cell-label" data-v-868cf37c>Status</div></div></div>',1)),t("div",ie,[t("div",ce,[t("div",oe,b(a.time),1)]),e[12]||(e[12]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",de,[t("div",ne,b(a.status),1)])]),e[15]||(e[15]=V('<div class="card-row header-row-card" data-v-868cf37c><div class="card-cell" data-v-868cf37c><div class="cell-label" data-v-868cf37c>Device</div></div><div class="card-divider-vertical" data-v-868cf37c></div><div class="card-cell" data-v-868cf37c><div class="cell-label" data-v-868cf37c>Bay</div></div></div>',1)),t("div",re,[t("div",ve,[t("div",ue,b(a.device),1)]),e[13]||(e[13]=t("div",{class:"card-divider-vertical"},null,-1)),t("div",ye,[t("div",be,b(a.bay),1)])])]))),128))])])])]))}},he=F(fe,[["__scopeId","data-v-868cf37c"]]);export{he as default};
